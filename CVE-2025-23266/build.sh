#!/bin/bash

echo "Building NVIDIAscape CVE-2025-23266 PoC..."

# Compile the shared library
echo "Compiling malicious shared library..."
gcc -shared -fPIC -o poc.so poc.c
if [ $? -ne 0 ]; then
    echo "Failed to compile shared library"
    exit 1
fi

# Build the Docker container
echo "Building exploit container..."
docker build -t nvidiascape-poc .
if [ $? -ne 0 ]; then
    echo "Failed to build Docker container"
    exit 1
fi

echo "Build complete! Container: nvidiascape-poc"
echo "Run './test.sh' to execute the PoC"