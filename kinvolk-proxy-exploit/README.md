# Kinvolk Proxy Exploit

This doesn't have a CVE, although perhaps it should, as it's considered working as intended. Details are [here](https://kinvolk.io/blog/2019/02/abusing-kubernetes-apiserver-proxying) but the TL;DR. is that if you can patch pod objects, you can make the API server make requests to any IP address, effectively providing SSRF.

## Setup

in exploit.sh set the TARGETIP to be what you want to retrieve (the default is [the armory](http://www.armory.com)) 

## Exploiting

1. Run the victim pod
2. Start the API server proxy with `kubectl proxy`
3. Test it's working with `curl http://localhost:8001/api/v1/namespaces/default/pods/echo-pod/proxy/`
4. Run the exploit script `exploit.sh`
5. Re-run the curl command above and confirm it's pointing to the TARGETIP